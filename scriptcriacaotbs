-- Criação das tabelas

CREATE TABLE MODULO (
  ID_MODULO SERIAL PRIMARY KEY,
  NOME TEXT
);

CREATE TABLE CURSO (
  ID_CURSO SERIAL PRIMARY KEY,
  NOME TEXT
);

CREATE TABLE PESSOA_FACILITADORA (
  ID_PESSOA_FACILITADORA SERIAL PRIMARY KEY,
  NOME TEXT,
  FRENTE TEXT
);

CREATE TABLE TURMA (
  ID_TURMA SERIAL PRIMARY KEY,
  ID_MODULO INTEGER REFERENCES MODULO (ID_MODULO),
  ID_CURSO INTEGER REFERENCES CURSO (ID_CURSO)
);

CREATE TABLE TURMA_PESSOA_FACILITADORA (
  ID_TURMA INTEGER REFERENCES TURMA (ID_TURMA),
  ID_PESSOA_FACILITADORA INTEGER REFERENCES PESSOA_FACILITADORA (ID_PESSOA_FACILITADORA),
  PRIMARY KEY (ID_TURMA, ID_PESSOA_FACILITADORA)
);

CREATE TABLE ESTUDANTE (
  ID_ESTUDANTE SERIAL PRIMARY KEY,
  NOME TEXT,
  STATUS TEXT,
  ID_TURMA INTEGER REFERENCES TURMA (ID_TURMA)
);

-- Inserção de dados

INSERT INTO MODULO (NOME)
VALUES ('Módulo 1');

INSERT INTO MODULO (NOME)
VALUES ('Módulo 2');

INSERT INTO CURSO (NOME)
VALUES ('Curso 1');

INSERT INTO CURSO (NOME)
VALUES ('Curso 2');

INSERT INTO PESSOA_FACILITADORA (NOME, FRENTE)
VALUES ('Ana', 'SOFT');

INSERT INTO PESSOA_FACILITADORA (NOME, FRENTE)
VALUES ('Carlos', 'HARD');

INSERT INTO TURMA (ID_MODULO, ID_CURSO)
VALUES (1, 1);

INSERT INTO TURMA (ID_MODULO, ID_CURSO)
VALUES (2, 2);

INSERT INTO TURMA_PESSOA_FACILITADORA (ID_TURMA, ID_PESSOA_FACILITADORA)
VALUES (1, 1);

INSERT INTO TURMA_PESSOA_FACILITADORA (ID_TURMA, ID_PESSOA_FACILITADORA)
VALUES (2, 1);

INSERT INTO ESTUDANTE (NOME, STATUS, ID_TURMA)
VALUES ('João', 'ATIVO', 1);

INSERT INTO ESTUDANTE (NOME, STATUS, ID_TURMA)
VALUES ('Maria', 'ATIVO', 1);

INSERT INTO ESTUDANTE (NOME, STATUS, ID_TURMA)
VALUES ('Pedro', 'ATIVO', 2);
